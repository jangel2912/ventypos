<style>
        
    .containre{
        margin-top: 50px;
    }
    .panel {
        padding: 0px;
    }
    .block{
        margin-bottom: 0px !important;
    }
    hr{ 
        margin: 0px;
        border-color: #dcdcdc;
    }
    .titulo{        
        padding: 12px;
        padding-left: 25px;
        padding-bottom: 6px;
    }
    .titulo h4{        
        color: #313131 !important;
    }
    
    .titulo2 h5{
        text-align: center;
        padding: 0px;
        margin: 0px;
        margin-bottom: 10px; 
        font-size: 16px;
        margin-bottom: 18px !important;
    }
    ol{
        font-weight: 500;
    }    
    ol li{
        margin-bottom: 15px !important;        
    }
    li span{
        font-weight: 100;
    }
    
    .fondo2{
        background-color: #fafafa;
    }
    code{
        margin: 0px 3px;
        white-space:nowrap;
        font-weight: 500;
    }

    .body .content #validate .btn {
        background: #eaeaea !important;
        border-color: transparent !important;
        padding: 3px 6px;
        margin-bottom: 4px;
        border-radius: 0px 4px 4px 0px !important;
        color: #656565;
        border: 1px solid #bbbbbb !important;
    }
    .input-append input{
        border-radius: 4px 0px 0px 4px !important;
        border-right: 1px solid #bbbbbb !important;
        background-color: #f2f6f9;
    }
    
    #btnEnviar{
        float: none;
        padding: 0px;
        text-align: center !important;
        margin: 0px;
    }
    
    #btnEnviar .btn{
        padding: 3px 25px;
        font-size: 14px;
        /* font-weight: 100; */
        margin-right: 10px !important;
        width: 100%;
        background-color: #62cb31 !important;
    }
    .tituloInstruccion{
        background-color: #f5f5f5;
        border-top: #fff solid 1px;
        padding: 8px;
        padding-left: 20px
    }
    .tituloInstruccion > strong{
        margin-right: 20px;
    }
        
    .tituloContenido, .contenidoInput{
        background-color: #fff;
    }
    .importante{
        text-transform: uppercase;
        color: #de5a5a;
        margin: 0px 5px;
    }
    
    .containre {
        margin-top: 10px;
    }

    .descargar{
        text-align: center;
        padding: 30px;
        font-size: 20px;
    }
    .descargar a{
        text-decoration: none !important;
        font-weight: 400;
     }
     
    .icon.wb-download{
        color: #62cb31;
        margin-right: 10px;
    }
    
    .contenidoInput{
        padding: 20px 20px !important;
        padding-top: 25px !important;
        padding-bottom: 10px !important;
        text-align: center;
        font-size: 16px;
        font-weight: 400;
    }
    .contenidoInput div{
        padding: 0px !important;
    }
    
    .contListas{
        padding: 10px;
    }
    
    .well{
        padding: 0px !important;
        background-color: #f7f7f7 !important;
    }
    
    .well > div{
        display: block;
        width: 100%;
    }
    
    .fondo2 {
        /*background-color: #ffffff*/;
    }
    
    
    .tituloContenido .col-md-6,
    .tituloContenido .col-md-4{
        padding: 0px !important;
    }
    
    .col-md-3{
        padding: 0px !important;
    }
    
    .tituloContenido .col-md-4 .well{
        margin-bottom: 0px;
    }       
    
    .tituloContenido .row {
        margin: 0px !important;
        padding: 10px;
        padding-bottom: 0px !important;
    }
    
    .center{
        text-align: center;
        padding: 10px;
        font-weight: 400;
        text-transform: uppercase;
    }
    
    .izq{
        text-align: left;
        padding: 10px;
        font-weight: 400;
        text-transform: none;
    }
    
    .listasCont{
        padding: 15px;
        background-color: #fff;
    }
    
    .listasCont div{
        margin-bottom: 10px;
    }
    
    .listasCont div.checker span, .listasCont div.radio span {
        background-image: none !important;
    }
    .listasCont span.switchery, .listasCont .checker {
        width: 40px;
        margin-right: 10px;
    }
    
    .switchery > small {
        width: 18px;
        height: 18px;
    }
    
    code{
        background-color: rgba(232,241,248,.4);
        margin-right: 6px;
    }
    .info{
        line-height: 16px;
        font-size: 13px;
    }
    .separador{
        margin-bottom: 20px;
        margin-top: 10px;
        border-color: #ececec !important;
    }
    
    .t{
        display : table;
        border-collapse : collapse;
    }

    .c{
        display : table-cell;
        line-height: 16px;
        font-size: 13px;
    }
    .tablaL .c:first-child{
        width: 120px;
        padding-right: 10px;
    }
    
    .tablaR .c:first-child{
        width: 210px;
        padding-right: 10px;
    }
    
    .t .c:first-child{
        text-align: right;        
    }    
    
    .checker{
        float: left;
        text-align: left;
    }
    
    .tablaL code{
        width: 110px;
        height: 20px;
        display: inline-block;
        line-height: 14px;
        text-align: center;
    }
    .tablaR code{
        width: 140px;
        height: 20px;
        display: inline-block;
        line-height: 14px;
        text-align: center;
    }
    
    .grp2{
        padding-top: 0px !important;
    }
    
    .info{
        margin-bottom: 0px !important;
    }
    .intruct{
        height: 105px !important;
    }
    
    .descargarLink{
        font-size: 20px;
        text-align: center;
        padding-top: 28px;
        font-weight: 400;
    }
    .contInfoInst{
        text-align: center;
        padding-top: 18px;
    }
    
    .textValidando{
        margin-top: 100px;
        text-align: center;
        padding: 50px;
        font-size: 22px;
        font-weight: 400;
        color: #3a3a3a;
    }
    .errorH{
        padding: 10px;
        font-size: 18px;
        font-weight: 400;
        color: white;
        background-color: #f1c505;
    }
    .errorH i{
        margin-right: 15px;
        margin-left: 10px;
        font-size: 20px;        
    }
    
    .descError{
        padding: 10px;
        color: #222;
    }
    .rowError{
        padding: 10px 20px;
        border-top: #ffffff 1px solid;
        border-bottom: #dedede 1px solid;
        background-color: #f9f9f9;
        color: black;
        height: auto;
        line-height: 30px;
        overflow: hidden;
    }
    
    select.listas{
        width: 50%;
        float: right;
    }
    
    .bRed{
        background-color: #C70C0C !important;
    }
    
    .I50{
        width: 50%;
        float: left;
    }
    .D50{
        width: 50%;
        float: right;
    }
    
    .rowError code{
        background-color: rgba(183, 0, 0, .8);
        margin-right: 10px;
        color: white;
        border: none !important;
    }
    
    .contBotonesReport{
        text-align: right;
        padding: 10px 10px 5px 20px;
        color: #222;
    }
    .contBotonesReport h4{
        color: #111 !important;
    }
    
    .contBotonesReport a
    .contBotonesReport button{
        font-size: 14px;
        padding: 2px 20px;
    }
    #tableReport {
        border-collapse: collapse;
        font-size: 11px;
        color: #2f2f2f;
    }
    #tableReport thead{
        font-weight: 400;
        font-size: 12px;
    }
    #tableReport thead td{        
        background-color: #fdfdfd;
        border-bottom: #d8d8d8 1px solid;
        border-left: #e0e0e0 1px solid;
        text-align: center;
    }
    #tableReport tbody td{
    }
    #tableReport thead tr{
        height: 40px;
    }
    #tableReport tbody tr{
        background-color: #f4f7f9;
        border-bottom: #e2e2e2 1px solid;        
    }
    .noImp td{
        background-color: #efcbcb !important;
        border-bottom: #dc9c9c 1px solid !important;        
        border-top: #dc9c9c 1px solid !important;        
    }
    
    #tableReport code{
        display: inline-block;
        width: 100%;
        height: 20px;
        line-height: 13px;
        text-align: center;
        color: white;
        font-weight: 100;
        font-size: 11px;
        border: none;
    }
    
    #tableReport .imp code{
        background-color: #62cb31;
    }
    
    #tableReport .noImp code{
        background-color: #d43030;
    }
    #tableReport td{
        padding: 2px;    
    }
    
    #tableReport td:first-child{
        padding: 0px 0px 0px 10px;    
    }
    #tableReport tbody td:first-child{
        padding: 0px 10px 0px 4px;    
    }
    
    #tableReport thead td:first-child{
        width: 50px;        
        border-left: none;
        padding-left: 0px;
    }
    
    .erCell{
        background-color: #c75050 !important;
        color: white !important;
        text-align: center !important;
    }
    
    .msj2{
        float: left;
        color: #212121;
        font-size: 14px;
        margin-left: 20px;
        line-height: 20px;
        padding-top: 8px;
        padding-left: 15px;
        height: 35px;
        border-left: #cecece 1px solid;
    }    
    
    #btnReporte button,
    #btnRevalidar button{
        background: #62cb31 !important;
    }
    
    .codeGreen{
        display: inline-block;
        height: 20px;
        width: 50px;
        line-height: 16px;
        background-color: #4db51c !important;
        border: none !important;
        text-align: center;
        color: #ffffff;  
    }
    
    #importarBox li{
        border-bottom: #efefef 1px solid;
    }
    
    .changeColor{
        border-radius: 3px 3px 0px 0px;
    }
    
    #sino{
        margin: 20px;
        background-color: #f1f6fb;
    }
    #sino thead{
        background-color: #e9f0f7;    
    }    
    
    #sino th{
        font-weight: 500;
        padding: 5px 20px;
        border-bottom: #d2d2d2 1px solid;
        color: #4a4a4a;
    }
    
    #sino td{
        padding: 0;
        text-align: center;
        border-bottom: #eaeaea 1px solid;        
    }
    
    #sino .cellErrRed{
        background-color: #dc5c5c;
        color: white;
        border: #eaeaea 1px solid;
    }
    
    .strR{
        font-weight: 500;
        color: #d64a23;
        font-size: 17px;        
    }
    
    .sinoId{
        font-weight: 500;
        color: #4a4a4a;
    }
    .newItemBtn{
        float: right;
        margin-right: 20px;   
        height: 30px;
        padding-top: 3px;
        cursor: pointer; 
    }
    
    .newItemBtn i{
        color: #62cb31;
        font-size: 22px;
    }
    .modal-content{
        border-radius: 5px !important;
    }
    .modal-header{
        margin: 0px;
        padding: 10px 0px;
        border-radius: 5px 5px 0px 0px !important;
        background-color: rgba(0,0,0,0.015);
        border-bottom: rgba(0,0,0,0.1) solid 1px;

    }

    .modal-body{
        padding-top: 10px;
        padding-bottom: 1px;
    }

    .modal-footer{
        padding: 0px;
        margin: 0px;
        background-color: #eee;
        margin-top: 10px;
        padding-top: 10px;
        padding-bottom: 10px;
        border-top: rgba(0,0,0,0.1) solid 1px;
        border-radius: 0px 0px 5px 5px !important;                

    }
    .black{
        color: #000;
    }
</style>
    <div class="col-md-12">    
        <div class="panel newPanel">

            <div class="titulo fondo2" style=" background-color: #fff">

               <h4><i class="icon ico-off" aria-hidden="true" ></i> Reinicio de sistema</h4> 
            
            </div>
            <div class="block" ><hr></div>
            <div class="block title">
                <?php
                $message = $this->session->flashdata('message');
                if (!empty($message)):
                ?>
                    <div class="alert alert-success">
                        <?php echo $message; ?>
                    </div>
                <?php endif; ?>
            </div>
            <div class="block" style=" padding: 0px;">
                <div class="tituloInstruccion red white">                        
                    <span>
                        Seleccione los módulos que desea reiniciar, tenga en cuenta que:<br>
                        -Al elegir vendedores solo se eliminarán los vendedores que no tengan ventas asociadas.<br>
                        -Al elegir Categorías solo se podrán eliminar las categorías que no tengan productos asociados.<br>
                        -Al elegir productos se deberá reiniciar todo los módulos del sistema (Ventas, Inventario, Movimiento en Inventario, Órdenes de compra, Promociones, auditorías) para todos los almacenes, ha excepcion de clientes, proveedores, vendedores y categorías.<br>
                        -Al elegir ventas se reiniciará tambien los cierres de caja (cierres de caja del almacén selecionado). SE BORRARÁN TODAS LAS VENTAS Y ÓRDENES RELIZADAS EN TU TIENDA.<br>
                        -Al elegir inventarios se reiniciará los movimientos de inventario, de producción y auditorias (movimientos de inventario, de producción y auditorias del almacén selecionado).<br>
                        -Al elegir movimientos de inventarios se reiniciará los movimientos de inventario, de producción y auditorias (movimientos de inventario, de producción y auditorias del almacén selecionado).<br>
                        -Al elegir órdenes de compra se reinicirán los movimientos de inventario de tipo entrada_compra (movimientos de inventario del almacén selecionado).
                    </span>
                </div><hr>
                <form id="reinicio">
                <div class="row">
                    <div id="camposOpcionales" class="col-md-6">
                        <div class="center changeColor">
                            <code>Clientes</code>
                        </div>
                        <div class="contListas grp2 contListasSwitch">
                            <div class="well">
                                <div>
                                    <div class="listasCont tablaR">
                                        <div class="t" >
                                            <div class="c">
                                                <input value="1" name="data[clientes]" id="cli" type="checkbox" class="js-switch" /><div class="c">Todos los almacenes</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>  
                            </div>
                        </div>
                    </div>
                    <div id="camposOpcionales" class="col-md-6">
                        <div class="center changeColor">
                            <code>Proveedores</code>
                        </div>
                        <div class="contListas grp2 contListasSwitch">
                            <div class="well">
                                <div>
                                    <div class="listasCont tablaR">
                                        <div class="t" >
                                            <div class="c">
                                                <input value="1" name="data[proveedores]" id="proveedores" type="checkbox" class="js-switch" /><div class="c">Todos los almacenes</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>  
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div id="camposOpcionales" class="col-md-6">
                        <div class="center changeColor">
                            <code>Productos</code>
                        </div>
                        <div class="contListas grp2 contListasSwitch">
                            <div class="well">
                                <div>
                                    <div class="listasCont tablaR">
                                        <div class="t" >
                                            <div class="c">
                                                <input value="1" name="data[productos]" id="pro" type="checkbox" class="js-switch" /><div class="c">Todos los almacenes</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>  
                            </div>
                        </div>
                    </div>                        
                </div>
                <div class="row">
                    <div id="camposOpcionales" class="col-md-6">
                        <div class="center changeColor">
                            <code>Vendedores</code>
                        </div>
                        <div class="contListas grp2 contListasSwitch">
                            <div class="well">
                                <div>
                                    <div class="listasCont tablaR">
                                        <?php 
                                        $i = 0;
                                        foreach($almacenes as $key => $a)
                                        {
                                            ?>
                                            <div class="t" >
                                                <div class="c">
                                                    <input data-titulo="vendedores" data-almacen="<?php echo $a ?>" value="<?php echo $key; ?>" name="data[vendedores][]" id="ven<?php echo $i?>" type="checkbox" class="js-switch" /><div class="c"><?php echo $a?></div>
                                                </div>
                                            </div>
                                            <?php
                                            $i++;
                                        }
                                        ?>
                                    </div>
                                </div>  
                            </div>
                        </div>
                    </div>       
                    <div id="camposOpcionales" class="col-md-6">
                        <div class="center changeColor">
                            <code>Categorías</code>
                        </div>
                        <div class="contListas grp2 contListasSwitch">
                            <div class="well">
                                <div>
                                    <div class="listasCont tablaR">
                                        <?php 
                                        $i = 0;
                                        foreach($data["categorias"] as $key => $a)
                                        {
                                            ?>
                                            <div class="t" >
                                                <div class="c">
                                                    <input data-titulo="Categorias" data-almacen="<?php echo $a->nombre ?>" value="<?php echo $a->id; ?>" name="data[categorias][]" id="cate<?php echo $i?>" type="checkbox" class="js-switch" /><div class="c"><?php echo $a->nombre?></div>
                                                </div>
                                            </div>
                                            <?php
                                            $i++;
                                        }
                                        ?>
                                    </div>
                                </div>  
                            </div>
                        </div>
                    </div>             
                </div>
                <div class="row">
                    <div id="camposOpcionales" class="col-md-6">
                        <div class="center changeColor">
                            <code>Inventarios</code>
                        </div>
                        <div class="contListas grp2 contListasSwitch">
                            <div class="well">
                                <div>
                                    <div class="listasCont tablaR">
                                        <?php 
                                        $i = 0;
                                        foreach($almacenes as $key => $a)
                                        {
                                            ?>
                                            <div class="t" >
                                                <div class="c">
                                                    <input data-titulo="Inventarios" data-almacen="<?php echo $a ?>" value="<?php echo $key; ?>" name="data[inventario][]" id="inv<?php echo $i?>" type="checkbox" class="js-switch" /><div class="c"><?php echo $a?></div>
                                                </div>
                                            </div>
                                            <?php
                                            $i++;
                                        }
                                        ?>
                                    </div>
                                </div>  
                            </div>
                        </div>
                    </div>
                    <div id="camposOpcionales" class="col-md-6">
                        <div class="center changeColor">
                            <code>Movimientos en inventario</code>
                        </div>
                        <div class="contListas grp2 contListasSwitch">
                            <div class="well">
                                <div>
                                    <div class="listasCont tablaR">
                                        <?php 
                                        $i = 0;
                                        foreach($almacenes as $key => $a)
                                        {
                                            ?>
                                            <div class="t" >
                                                <div class="c">
                                                    <input data-titulo="Movimientos en Inventario" data-almacen="<?php echo $a ?>" value="<?php echo $key ?>" name="data[movimientos][]" id="mov<?php echo $i?>" type="checkbox" class="js-switch" /><div class="c"><?php echo $a?></div>
                                                </div>
                                            </div>
                                            <?php
                                            $i++;
                                        }
                                        ?>
                                    </div>
                                </div>  
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div id="camposOpcionales" class="col-md-6">
                        <div class="center">
                            <code>Órdenes de compra</code>
                        </div>
                        <div class="contListas grp2 contListasSwitch">
                            <div class="well">
                                <div>
                                    <div class="listasCont tablaR">
                                        <?php 
                                        foreach($almacenes as $key => $a)
                                        {
                                            ?>
                                            <div class="t" >
                                                <div class="c">
                                                    <input data-titulo="Ordenes de Compra" data-almacen="<?php echo $a ?>" value="<?php echo $key?>" name="data[ordenes][]" id="ord<?php echo $i?>" type="checkbox" class="js-switch" /><div class="c"><?php echo $a?></div>
                                                </div>
                                            </div>
                                            <?php
                                            $i++;
                                        }
                                        ?>
                                    </div>
                                </div>  
                            </div>
                        </div>
                    </div>
                    <div id="camposOpcionales" class="col-md-6">
                        <div class="center changeColor">
                            <code>Ventas</code>
                        </div>
                        <div class="contListas grp2 contListasSwitch">
                            <div class="well">
                                <div>
                                    <div class="listasCont tablaR">
                                        <?php 
                                        foreach($almacenes as $key => $a)
                                        {
                                            ?>
                                            <div class="t" >
                                                <div class="c">
                                                    <input data-titulo="Ventas" data-almacen="<?php echo $a ?>" value="<?php echo $key?>" name="data[ventas][]" id="ven<?php echo $i?>" type="checkbox" class="js-switch" /><div class="c"><?php echo $a?></div>
                                                </div>
                                            </div>
                                            <?php
                                            $i++;
                                        }
                                        ?>
                                        <!--<div class="t" >
                                            <div class="c">
                                                <input  value="1" name="data[ventas]" id="ven" type="checkbox" class="js-switch" /><div class="c">Todos los almacenes</div>
                                            </div>
                                        </div>-->
                                    </div>
                                </div>  
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row-fluid">
                    <br>
                    <a href="<?php echo site_url('frontend/configuracion')?>" class="btn btn-default">Volver</a>
                    <input type="submit" class="btn btn-success" value="Reiniciar">
                    <br>
                </div>
                </form>
            </div>
        </div>        
    </div>
<!--div id="dialog-confirmacion-form"  title="<?php echo custom_lang('sima_pay_information', "Reiniciar Módulos"); ?>">
    <form id="confirmacion-form">
        <div class="row-form">
            <div class="span5">Ingrese el email y password del administrador para continuar con el proceso</div>
        </div>
        <div class="row-form" class="data-fluid">
            <div class="span2"><?php echo custom_lang('sima_pay_value', "Email"); ?>:</div>
            <div class="span3">
                <input type="text" name="email" id="email"/>
            </div>
        </div>
        <div class="row-form">
            <div class="span2"><?php echo custom_lang('sima_password', "Password"); ?>:</div>
            <div class="span3">
                <input type="password" name="password" id="password"/>
            </div>
        </div>
        <br />
        <div align="center"> 
            <input type="submit" value="Reiniciar" id="reiniciarSubmit" class="btn btn-primary"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  
            <input type="button" value="Cancelar"  id="cancelar" class="btn btn-warning"/> 
        </div>
    </form>
</div-->
<!--div id="dialog-muestra-form"  title="<?php echo custom_lang('sima_pay_information', "Reiniciar Módulos"); ?>">
    <form id="muestra-form">
        <div class="row-form">
            <div class="span5">Se reiniciaran los siguientes modulos</div>
        </div>
        <div class="muestra"></div>
        <br />
        <div align="center"> 
            <input type="submit" value="Continuar"  class="btn btn-primary"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  
            <input type="button" value="Cancelar"  id="cancelar" class="btn btn-warning"/> 
        </div>
    </form>
</div-->
<script>
    $(document).ready(function(){
        defaults = {
            color             : '#69d65a'
          , secondaryColor    : '#f4f8f9'
          , jackColor         : '#fff'
          , jackSecondaryColor: null
          , className         : 'switchery'
          , disabled          : false
          , disabledOpacity   : 0.5
          , speed             : '0.1s'
          , size              : 'default'
        }
        var opcObj = {};
        
        // Convertimos a Switchery
        $('.contListasSwitch input[type=checkbox]').each(function(){
                // Obtenemos el id de cada input
                var elementId = $(this).attr("id"); 

                // convertimos el check a switchery
                new Switchery( $('#'+elementId)[0], defaults );

                // almacenamos el elemento dom en el array opcObj
                opcObj[ elementId ] = $(this);
        }); 
        $("#dialog-confirmacion-form").dialog({
            autoOpen: false,
            height: 275,
            width: 570,
            modal: true,
        });
        $("#dialog-muestra-form").dialog({
            autoOpen: false,
            height: 400,
            width: 570,
            modal: true,
        });
    });
    
    function muestra()
    {
        $("#dialog-muestra-form").dialog("open");
       
    }
$(document).ready(function(){

    var confirmDialog = confirmDialog || (function(){
         'use strict';

        // Creating modal dialog's DOM
        var $dialog = $(
            '<div id="dialog-motivo-form"class="modal fade"  data-keyboard="true" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;">' +
            '<div class="modal-dialog modal-m">' +
            '<div class="modal-content">' +
            '<div class="modal-header"><?php echo custom_lang('sima_pay_information', "Reiniciar Módulos"); ?></div>' +
            '<div class="modal-body">' +
                '<form id="confirmacion-form">'+
                    '<div class="row-form">'+
                    '    <div class="span5">Ingrese el email y password del administrador para continuar con el proceso</div>'+
                    '</div>'+
                    '<div class="row-form" class="data-fluid">'+
                    '    <div class="span2"><?php echo custom_lang('sima_pay_value', "Email"); ?>:</div>'+
                    '<div class="span3">'+
                    '    <input type="text" name="email" id="email"/>'+
                    '</div>'+
                    '</div>'+
                    '<div class="row-form">'+
                    '    <div class="span2"><?php echo custom_lang('sima_password', "Password"); ?>:</div>'+
                    '<div class="span3">'+
                    '    <input type="password" name="password" id="password"/>'+
                    '</div>'+
                    '</div>'+
                    '<br />'+
                    '<div align="center"> '+
                    '<input type="submit" value="Reiniciar" id="reiniciarSubmit" class="btn btn-success"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  '+
                    '<input type="button" value="Cancelar"  id="cancelar" data-dismiss="modal" class="btn btn-default"/> '+
                    '</div><br>'+
                '</form>'+
            '</div>' +
            '</div></div></div>');
             return {
                 show: function (id, options) {
                      $dialog.modal();
                 },
                 hide: function () {
                 }
             }
    })(jQuery);
    var reinicioDialog = reinicioDialog || (function ($) {
        'use strict';

        // Creating modal dialog's DOM
        var $dialog = $(
            '<div id="dialog-motivo-form"class="modal fade"  data-keyboard="true" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;">' +
            '<div class="modal-dialog modal-m">' +
            '<div class="modal-content">' +
            '<div class="modal-header"><?php echo custom_lang('sima_pay_information', "Reiniciar Módulos"); ?></div>' +
            '<div class="modal-body">' +
                '<form id="muestra-form">'+
                    '<div class="row-form">'+
                        '<div class="span5">Se reiniciarán los siguientes módulos</div>'+
                    '</div>'+
                    '<div class="muestra"></div>'+
                    '<br />'+
                    '<div align="center"> '+
                        '<input type="submit" value="Continuar"  class="btn btn-success"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  '+
                        '<input type="button" value="Cancelar"  id="cancelar" data-dismiss="modal" class="btn btn-default"/>'+
                    '</div>'+
                '</form>'+
            '</div>' +
            '<div class="modal-footer">'+
                
            '</div>'+
            '</div></div></div>');

        return {
        /**
        * Opens our dialog
        * @param message Custom message
        * @param options Custom options:
        * 				  options.dialogSize - bootstrap postfix for dialog size, e.g. "sm", "m";
        * 				  options.progressType - bootstrap postfix for progress bar type, e.g. "success", "warning".
        */
        show: function (id, options) {
            // Assigning defaults
            if (typeof options === 'undefined') {
            options = {};
            }
            /*if (typeof message === 'undefined') {
            message = 'Loading';
            }*/
            var settings = $.extend({
            dialogSize: 'm',
            progressType: '',
            onHide: null // This callback runs after the dialog was hidden
            });

            var html = "<div class='row-form'><div class='col-md-4'>Módulo<hr></div><div class='col-md-8'>Almacén<hr></div></div>";
            if($('input#cli').prop("checked") == true)
            {
                html = "<div class='row-form'><div class='col-md-4'><code align=right>Clientes:</code></div><div class='col-md-8'>Todos los Almacenes</div></div>";
            }
            if($('input#proveedores').prop("checked") == true)
            {
                html += "<div class='row-form'><div class='col-md-4'><code>Proveedores:</code></div><div class='col-md-8'>Todos los Almacenes</div></div>";
            }
            if($('input#pro').prop("checked") == true)
            {
                html += "<div class='row-form'><div class='col-md-4'><code>Productos:</code></div><div class='col-md-8'>Todos los Almacenes</div></div>";
            }
            /*if($('input#ven').prop("checked") == true)
            {
            html += "<div class='row-form'><div class='col-md-4'><code>Ventas:</code></div><div class='col-md-8'>Todos los Almacenes</div></div>";
            } */
            var modulo = "";
            var moduloActual,almacen;

            $('form#reinicio').find('input').each(function(i,e){
                //console.log("i="+i);
                //console.log("data-titulo="+$(e).attr("data-titulo"));
                if(i >2)
                { 
                    //console.log("alma="+$(e).attr("data-almacen"));
                    if($(e).prop("checked") == true)
                    {
                        moduloActual = $(e).attr("data-titulo");
                        almacen = $(e).attr("data-almacen");
                        if(moduloActual != modulo)
                        {
                            html += "<div class='row-form'><div class='col-md-4'><code>"+moduloActual+":</code></div><div class='col-md-8'>"+almacen+"</div></div>";
                            modulo = moduloActual;
                        }else{
                            html += "<div class='row-form'><div class='col-md-4'></div><div class='col-md-8'>"+almacen+"</div></div>";
                        }
                    }
                }
            });
            $dialog.find("div.muestra").empty();
            $dialog.find("div.muestra").append(html);
            
            // Configuring dialog
            
            // Adding callbacks
            if (typeof settings.onHide === 'function') {
            $dialog.off('hidden.bs.modal').on('hidden.bs.modal', function (e) {
                settings.onHide.call($dialog);
            });
            }
            // Opening dialog
            $dialog.modal();
        },
        /**
        * Closes dialog
        */
        hide: function () {
            $dialog.modal('hide');
            }
        };

    })(jQuery);

    $(document).on('submit','form#reinicio',function(event){
        event.preventDefault();
        var seleccionado = false;
        $('.contListasSwitch input[type=checkbox]').each(function(i,e){
            if($(e).prop('checked') == true)
            {
                seleccionado = true;
            }
        });
        if(seleccionado == true)
        {
            if(confirm("¿Esta seguro que desea reiniciar la información seleccionada?"))
            {
                if($('input#pro').prop("checked") == true && confirm("Se ha seleccionado productos, recuerde que al elegir productos se reiniciaran todos los módulos del sistema (Ventas, Inventarios, Movimientos en Inventario, Órdenes de Compra, Promociones) para todos los almacenes, ha excepción de clientes y proveedores, ¿Está seguro de reiniciar los módulos seleccionados?"))
                {
                    
                    reinicioDialog.show();
                }
                reinicioDialog.show();
            }
        }else{
            //alert("No ha seleccionado ningun módulo para reinicio");
            swal({
                position: 'center',
                type: 'error',
                title: "No ha seleccionado ningun módulo para reinicio",               
                showConfirmButton: false,
                timer: 1500
            })
        }
    });
    $(document).on('submit','form#muestra-form',function(event){
       event.preventDefault();
       //$("#dialog-muestra-form").dialog("close");
       //$("#dialog-confirmacion-form").dialog("open");
       reinicioDialog.hide();
       confirmDialog.show();
    });
    $(document).on('submit','form#confirmacion-form',function(event){
        event.preventDefault();
        $("#reiniciarSubmit").attr("disabled","disabled");
        $.post
        (
           "<?php echo site_url("restablecer/resetEmail") ?>",
            /*{
                "data":$('form#reinicio').serialize(),
                "email":$('form#confirmacion-form').find("input#email").val(),
                "password":$('form#confirmacion-form').find("input#password").val(),
            },*/
            $('form').serialize(),
            function(data){
                if(data.resp == 1)
                {
                    swal({
                        position: 'center',
                        type: 'success',
                        title: "Los módulos elegidos han sido reiniciados",
                        html: data.mensaje,
                        showConfirmButton: false,
                        timer: 2000
                    })
                    setTimeout(function(){ location.href = "<?php echo site_url("frontend/configuracion") ?>"; }, 2100); 
                    //alert("Los módulos elegidos han sido reiniciados");
                    //location.href = "<?php echo site_url("frontend/configuracion") ?>";
                }else if(data.resp == 2)
                {
                    swal({
                        position: 'center',
                        type: 'error',
                        title: "El email y password no coinciden",
                        //html: data.mensaje,
                        showConfirmButton: false,
                        timer: 1500
                    })
                    //alert("El email y password no coinciden");
                    $("#reiniciarSubmit").removeAttr("disabled");
                }
            },'json'
        );  
    });
    $(document).on('click','input#cancelar',function(){
        $(this).parents("form").parent().dialog("close");
    });
});
</script>